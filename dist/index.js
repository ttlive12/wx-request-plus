"use strict";var w=(n,i)=>()=>(i||n((i={exports:{}}).exports,i),i.exports);var Y=w(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0}),Object.defineProperty(Q,"default",{enumerable:!0,get:function(){return ye}});var ye=function(){"use strict";function n(){this.handlers=[]}var i=n.prototype;return i.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.forEach=function(e){this.handlers.forEach(function(t){t!==null&&e(t)})},n}()});var ee=w(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0}),Object.defineProperty(U,"default",{enumerable:!0,get:function(){return we}});var P,qe=(P=require("lru-cache"))&&P.__esModule?P:{default:P};function Z(n,i,e,t,r,a,u){try{var o=n[a](u),s=o.value}catch(h){e(h);return}o.done?i(s):Promise.resolve(s).then(t,r)}function M(n){return function(){var i=this,e=arguments;return new Promise(function(t,r){var a=n.apply(i,e);function u(s){Z(a,t,r,u,o,"next",s)}function o(s){Z(a,t,r,u,o,"throw",s)}u(void 0)})}}function N(n,i){var e,t,r,a,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(s){return function(h){return function(c){if(e)throw TypeError("Generator is already executing.");for(;u;)try{if(e=1,t&&(r=2&c[0]?t.return:c[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,c[1])).done)return r;switch(t=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return u.label++,{value:c[1],done:!1};case 5:u.label++,t=c[1],c=[0];continue;case 7:c=u.ops.pop(),u.trys.pop();continue;default:if(!(r=(r=u.trys).length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){u=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){u.label=c[1];break}if(c[0]===6&&u.label<r[1]){u.label=r[1],r=c;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(c);break}r[2]&&u.ops.pop(),u.trys.pop();continue}c=i.call(n,u)}catch(f){c=[6,f],t=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([s,h])}}}var we=function(){"use strict";function n(e){e===void 0&&(e={}),this.cache=new qe.default({max:e.maxSize||100,ttl:e.maxAge||3e5,allowStale:!1,updateAgeOnGet:!0,updateAgeOnHas:!1})}var i=n.prototype;return i.get=function(e){var t=this;return M(function(){var r;return N(this,function(a){return(r=t.cache.get(e))&&(r.fromCache=!0),[2,r]})})()},i.set=function(e,t,r){var a=this;return M(function(){return N(this,function(u){return t.timestamp=Date.now(),a.cache.set(e,t,{ttl:r||void 0}),[2]})})()},i.delete=function(e){var t=this;return M(function(){return N(this,function(r){return t.cache.delete(e),[2]})})()},i.clear=function(){var e=this;return M(function(){return N(this,function(t){return e.cache.clear(),[2]})})()},n}()});var A=w(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"ErrorType",{enumerable:!0,get:function(){return Ee}});var E,Ee=((E={}).TIMEOUT="TIMEOUT",E.NETWORK="NETWORK",E.CANCEL="CANCEL",E.SERVER="SERVER",E.CLIENT="CLIENT",E.OFFLINE="OFFLINE",E.UNKNOWN="UNKNOWN",E)});var C=w(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),function(n,i){for(var e in i)Object.defineProperty(n,e,{enumerable:!0,get:i[e]})}(D,{buildURL:function(){return Te},combineURLs:function(){return ae},createError:function(){return Ce},debounce:function(){return je},deepMerge:function(){return function n(){for(var i=arguments.length,e=Array(i),t=0;t<i;t++)e[t]=arguments[t];var r={};return e.forEach(function(a){a&&Object.keys(a).forEach(function(u){var o=a[u];(o===void 0?"undefined":j(o))!=="object"||o===null||Array.isArray(o)?r[u]=o:j(r[u])==="object"&&r[u]!==null?r[u]=n(r[u],o):r[u]=n({},o)})}),r}},delay:function(){return xe},generateCacheKey:function(){return Re},generateRandomId:function(){return Ie},get:function(){return Qe},getNetworkStatus:function(){return Ae},getPriority:function(){return Me},getValueByPath:function(){return Ue},isAbsoluteURL:function(){return ie},isJSONData:function(){return ke},isNetworkError:function(){return Oe},normalizeHeaderName:function(){return Ne},parseHeaders:function(){return Le},serializeParams:function(){return ue},shouldCache:function(){return Pe},sortObjectKeys:function(){return L},throttle:function(){return Se}});var re=A();function te(n,i){(i==null||i>n.length)&&(i=n.length);for(var e=0,t=Array(i);e<i;e++)t[e]=n[e];return t}function j(n){return n&&typeof Symbol<"u"&&n.constructor===Symbol?"symbol":typeof n}function ne(n,i){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e)return(e=e.call(n)).next.bind(e);if(Array.isArray(n)||(e=function(r,a){if(r){if(typeof r=="string")return te(r,void 0);var u=Object.prototype.toString.call(r).slice(8,-1);if(u==="Object"&&r.constructor&&(u=r.constructor.name),u==="Map"||u==="Set")return Array.from(u);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return te(r,void 0)}}(n))||i&&n&&typeof n.length=="number"){e&&(n=e);var t=0;return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Te(n,i,e){var t="";if(t=i&&!ie(n)?ae(i,n):n,e&&Object.keys(e).length>0){var r=t.split("#"),a=ue(e),u=r[0].indexOf("?")===-1?"?":"&";r[0]+=u+a,t=r.join("#")}return t}function ie(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function ae(n,i){return i?n.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):n}function ue(n){var i=[];return Object.keys(n).forEach(function(e){var t=n[e];t!=null&&(Array.isArray(t)?t.forEach(function(r){i.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):i.push(encodeURIComponent(e)+"="+encodeURIComponent(t)))}),i.join("&")}function Re(n){if(n.cacheKey)return n.cacheKey;var i=n.url,e=n.method,t=n.params,r=n.data;return(e===void 0?"GET":e)+":"+i+(t?":"+JSON.stringify(L(t)):"")+(r?":"+JSON.stringify(L(r)):"")}function L(n){if(!n||(n===void 0?"undefined":j(n))!=="object"||Array.isArray(n))return n;var i={};return Object.keys(n).sort().forEach(function(e){i[e]=L(n[e])}),i}function Ce(n,i,e,t,r,a){a===void 0&&(a=re.ErrorType.UNKNOWN);var u=Error(n);return u.config=i,u.status=e,u.data=t,u.headers=r,u.type=a,u}function xe(n){return new Promise(function(i){return setTimeout(i,n)})}function Oe(n){return!n.status&&n.type===re.ErrorType.NETWORK}function Ae(){return new Promise(function(n){wx.getNetworkType({success:function(i){var e=i.networkType,t=e!=="none";n({isConnected:t,networkType:e,signalStrength:t?e==="wifi"?90:70:0})},fail:function(){n({isConnected:!0,networkType:"unknown"})}})})}function je(n,i){var e=null;return function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];var u=this;e&&clearTimeout(e),e=setTimeout(function(){n.apply(u,r)},i)}}function Se(n,i){var e=!1;return function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];e||(n.apply(this,r),e=!0,setTimeout(function(){e=!1},i))}}function Pe(n){var i=(n.method||"GET").toUpperCase(),e=n.cache;return e!==!1&&e!=="no-cache"&&i==="GET"&&(e===!0||e==="force-cache"||e==="only-if-cached")}function Me(n){return n.priority||5}function Ne(n,i){n&&Object.keys(n).forEach(function(e){e!==i&&e.toUpperCase()===i.toUpperCase()&&(n[i]=n[e],delete n[e])})}function Le(n){var i,e,t,r={};return n&&n.split(`
`).forEach(function(a){(t=a.indexOf(":"))!==-1&&(i=a.substring(0,t).trim().toLowerCase(),e=a.substring(t+1).trim(),i&&(r[i]=r[i]?r[i]+", "+e:e))}),r}function ke(n){return Object.prototype.toString.call(n)==="[object Object]"||Array.isArray(n)}function Ie(){return Math.random().toString(36).substring(2,15)}function Qe(n,i,e){if(e===void 0&&(e=void 0),!n||!i)return e;for(var t,r=i.split("."),a=n,u=ne(r);!(t=u()).done;){var o=t.value;if(a==null||(a===void 0?"undefined":j(a))!=="object")return e;a=a[o]}return a===void 0?e:a}function Ue(n,i,e){if(e===void 0&&(e=void 0),!n||!i)return e;for(var t,r=i.split("."),a=n,u=ne(r);!(t=u()).done;){var o=t.value;if(a==null||(a===void 0?"undefined":j(a))!=="object")return e;a=a[o]}return a===void 0?e:a}});var oe=w(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0}),Object.defineProperty(B,"default",{enumerable:!0,get:function(){return _e}});var T=A(),S=C(),_e=function(n){return new Promise(function(i,e){var t=n.url,r=n.data,a=n.headers,u=n.method,o=n.timeout,s=n.responseType,h=n.enableHttp2,c=n.enableQuic,f=n.enableCache,p=n.enableVerify;if(!t){e((0,S.createError)("\u8BF7\u6C42URL\u4E0D\u80FD\u4E3A\u7A7A",n,void 0,void 0,void 0,T.ErrorType.CLIENT));return}var l={url:t,data:r,header:a===void 0?{}:a,method:u===void 0?"GET":u,timeout:o,enableHttp2:h,enableQuic:c,enableCache:f,success:function(d){var g={data:d.data,status:d.statusCode,statusText:d.errMsg||"",headers:d.header||{},config:n,request:b,timestamp:Date.now()};if((n.validateStatus||function(q){return q>=200&&q<300})(d.statusCode)){if(n.transformResponse)try{g.data=n.transformResponse(g.data,g)}catch(q){e((0,S.createError)("\u8F6C\u6362\u54CD\u5E94\u6570\u636E\u5931\u8D25: "+q.message,n,d.statusCode,d.data,d.header,T.ErrorType.CLIENT));return}n.onDone&&n.onDone(g),i(g)}else e((0,S.createError)("\u8BF7\u6C42\u5931\u8D25\uFF0C\u72B6\u6001\u7801: "+d.statusCode,n,d.statusCode,d.data,d.header,d.statusCode>=500?T.ErrorType.SERVER:T.ErrorType.CLIENT))},fail:function(d){var g=T.ErrorType.UNKNOWN;d.errMsg&&(d.errMsg.includes("timeout")?g=T.ErrorType.TIMEOUT:d.errMsg.includes("fail")&&(g=T.ErrorType.NETWORK)),e((0,S.createError)(d.errMsg||"\u8BF7\u6C42\u5931\u8D25",n,void 0,void 0,void 0,g))}};p!==void 0&&(l.sslVerify=p),s&&(l.responseType=s);var b=wx.request(l);try{n.onDownloadProgress&&b&&(b.onProgressUpdate?b.onProgressUpdate(n.onDownloadProgress):console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301\u4E0B\u8F7D\u8FDB\u5EA6\u76D1\u542C"))}catch(d){console.warn("\u8BBE\u7F6E\u4E0B\u8F7D\u8FDB\u5EA6\u76D1\u542C\u5931\u8D25",d)}try{n.cancelToken&&b&&typeof b.abort=="function"&&n.cancelToken.promise.then(function(d){b.abort(),e((0,S.createError)(d||"\u8BF7\u6C42\u5DF2\u53D6\u6D88",n,void 0,void 0,void 0,T.ErrorType.CANCEL))})}catch(d){console.warn("\u53D6\u6D88\u8BF7\u6C42\u64CD\u4F5C\u5931\u8D25",d)}})}});var se=w(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),Object.defineProperty(K,"default",{enumerable:!0,get:function(){return Be}});var De=A(),W=C(),Be=function(){"use strict";function n(e){e===void 0&&(e={}),this.queue=[],this.processing=[],this.offlineQueue=[],this.isProcessing=!1,this.isNetworkAvailable=!0,this.maxConcurrent=e.maxConcurrent||10,this.enableOfflineQueue=e.enableOfflineQueue!==!1,this.setupNetworkListener()}var i=n.prototype;return i.enqueue=function(e,t){var r=this;return new Promise(function(a,u){var o=(0,W.getPriority)(e),s={config:e,execute:function(){return t().then(function(h){return a(h),Promise.resolve()}).catch(function(h){return u(h),Promise.resolve()})},timestamp:Date.now(),priority:o,status:"pending"};if(e.ignoreQueue){r.processItem(s);return}if(!r.isNetworkAvailable){r.enableOfflineQueue?r.offlineQueue.push(s):u((0,W.createError)("\u7F51\u7EDC\u4E0D\u53EF\u7528",e,void 0,void 0,void 0,De.ErrorType.OFFLINE));return}r.queue.push(s),r.sortQueue(),r.processQueue()})},i.cancel=function(e){this.queue=this.queue.filter(function(t){return!e(t.config)}),this.offlineQueue=this.offlineQueue.filter(function(t){return!e(t.config)})},i.clear=function(){this.queue=[],this.offlineQueue=[]},i.getStatus=function(){return{queueSize:this.queue.length,processingSize:this.processing.length,offlineQueueSize:this.offlineQueue.length,isNetworkAvailable:this.isNetworkAvailable}},i.processQueue=function(){var e=this;if(!this.isProcessing){this.isProcessing=!0;var t=function(){if(e.processing.length>=e.maxConcurrent||e.queue.length===0){e.isProcessing=!1;return}var r=e.queue.shift();if(!r){e.isProcessing=!1;return}e.processItem(r),t()};t()}},i.processItem=function(e){var t=this;e.status="processing",this.processing.push(e),e.execute().then(function(){e.status="completed"}).catch(function(r){e.status="failed",console.error("\u961F\u5217\u9879\u6267\u884C\u5931\u8D25:",r)}).finally(function(){var r=t.processing.indexOf(e);r!==-1&&t.processing.splice(r,1),t.processQueue()})},i.sortQueue=function(){this.queue.sort(function(e,t){var r=t.priority-e.priority;return r!==0?r:e.timestamp-t.timestamp})},i.setupNetworkListener=function(){var e=this;(0,W.getNetworkStatus)().then(function(t){e.handleNetworkChange(t.isConnected)}),wx.onNetworkStatusChange(function(t){e.handleNetworkChange(t.isConnected)})},i.handleNetworkChange=function(e){var t=this;if(this.isNetworkAvailable=e,e&&this.offlineQueue.length>0){var r=[].concat(this.offlineQueue);this.offlineQueue=[],r.forEach(function(a){t.queue.push(a)}),this.sortQueue(),this.processQueue()}},n}()});var ce=w(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0}),Object.defineProperty(z,"default",{enumerable:!0,get:function(){return We}});var G=C(),We=function(){"use strict";function n(e){e===void 0&&(e={}),this.batchGroups=new Map,this.batchTimers=new Map,this.maxBatchSize=e.maxBatchSize||5,this.batchInterval=e.batchInterval||50,this.defaultBatchConfig={batchUrl:e.batchUrl||"/batch",batchMode:e.batchMode||"json",method:"POST",headers:{"Content-Type":"application/json","X-Batch-Request":"true"},requestsFieldName:e.requestsFieldName||"requests"}}var i=n.prototype;return i.addToBatch=function(e,t){var r=this;return new Promise(function(a,u){var o=e.groupKey||(0,G.generateRandomId)();r.batchGroups.has(o)||r.batchGroups.set(o,[]);var s=r.batchGroups.get(o);if(s.push({config:e,resolve:a,reject:u}),s.length>=r.maxBatchSize){r.processBatchGroup(o,t);return}r.batchTimers.has(o)&&clearTimeout(r.batchTimers.get(o)),r.batchTimers.set(o,setTimeout(function(){r.processBatchGroup(o,t)},r.batchInterval))})},i.processBatchGroup=function(e,t){var r=this.batchGroups.get(e)||[];if(this.batchGroups.delete(e),this.batchTimers.has(e)&&(clearTimeout(this.batchTimers.get(e)),this.batchTimers.delete(e)),r.length!==0){if(r.length===1){var a=r[0];t(a.config).then(function(u){return a.resolve(u)}).catch(function(u){return a.reject(u)});return}this.sendBatchRequest(r,t)}},i.sendBatchRequest=function(e,t){var r=e[0].config.baseURL,a=this.getBatchConfig(e),u=e.map(function(f){var p=f.config;return{url:p.url,method:p.method,data:p.data,params:p.params,headers:p.headers}});if(a.transformBatchRequest)s=a.transformBatchRequest(u);else if(a.batchMode==="form"){var o=new FormData;u.forEach(function(f,p){if(o.append(""+p+"_url",f.url||""),o.append(""+p+"_method",f.method||"GET"),f.data){var l;o.append(""+p+"_data",((l=f.data)&&typeof Symbol<"u"&&l.constructor===Symbol?"symbol":typeof l)=="object"?JSON.stringify(f.data):f.data)}}),s=o}else{var s,h,c=a.requestsFieldName||"requests";(h={})[c]=u,s=h}t({url:a.batchUrl||"/batch",method:a.method||"POST",baseURL:r,data:s,headers:a.headers||{"Content-Type":"application/json","X-Batch-Request":"true"},timeout:a.timeout}).then(function(f){if(a.transformBatchResponse){var p=a.transformBatchResponse(f,e);e.forEach(function(d,g){g<p.length?d.resolve(p[g]):d.reject(Error("\u6279\u91CF\u54CD\u5E94\u4E0D\u5339\u914D"))});return}var l=[];if(a.responsePath){var b=(0,G.get)(f.data,a.responsePath);l=Array.isArray(b)?b:[b]}else l=Array.isArray(f.data)?f.data:[f.data];e.forEach(function(d,g){if(g<l.length){var q=l[g],me={data:q.data||q,status:q.status||f.status,statusText:q.statusText||f.statusText,headers:q.headers||{},config:d.config,request:f.request,timestamp:Date.now()};d.resolve(me)}else d.reject(Error("\u6279\u91CF\u54CD\u5E94\u4E0D\u5339\u914D"))})}).catch(function(f){e.forEach(function(p){return p.reject(f)})})},i.getBatchConfig=function(e){var t=e.map(function(r){return r.config.batchConfig||{}}).filter(function(r){return Object.keys(r).length>0});return t.length>0?G.deepMerge.apply(void 0,[].concat([this.defaultBatchConfig],t)):this.defaultBatchConfig},i.executeBatch=function(e,t){return Promise.all(e.map(function(r){return t(r)}))},n}()});var le=w(F=>{"use strict";function he(n,i){(i==null||i>n.length)&&(i=n.length);for(var e=0,t=Array(i);e<i;e++)t[e]=n[e];return t}Object.defineProperty(F,"__esModule",{value:!0}),Object.defineProperty(F,"default",{enumerable:!0,get:function(){return Ke}});var Ke=function(){"use strict";function n(){this.preloadCache=new Map,this.setupCleanupTimer()}var i=n.prototype;return i.preload=function(e,t){var r=this,a=e.preloadKey,u=e.expireTime,o=u===void 0?3e4:u;return t(e).then(function(s){var h=Date.now()+o;r.preloadCache.set(a,{response:s,expireTime:h})}).catch(function(s){console.error("\u9884\u8BF7\u6C42\u5931\u8D25:",s)})},i.getPreloadResponse=function(e){var t=this.preloadCache.get(e);return t?t.expireTime<Date.now()?(this.preloadCache.delete(e),null):(this.preloadCache.delete(e),t.response):null},i.hasPreloadResponse=function(e){var t=this.preloadCache.get(e);return!!t&&(!(t.expireTime<Date.now())||(this.preloadCache.delete(e),!1))},i.cleanup=function(){for(var e,t=Date.now(),r=function(o,s){var h=typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(h)return(h=h.call(o)).next.bind(h);if(Array.isArray(o)||(h=function(f,p){if(f){if(typeof f=="string")return he(f,void 0);var l=Object.prototype.toString.call(f).slice(8,-1);if(l==="Object"&&f.constructor&&(l=f.constructor.name),l==="Map"||l==="Set")return Array.from(l);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return he(f,void 0)}}(o))){h&&(o=h);var c=0;return function(){return c>=o.length?{done:!0}:{done:!1,value:o[c++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.preloadCache.entries());!(e=r()).done;){var a=e.value,u=a[0];a[1].expireTime<t&&this.preloadCache.delete(u)}},i.setupCleanupTimer=function(){var e=this;setInterval(function(){e.cleanup()},6e4)},i.getStatus=function(){return{count:this.preloadCache.size,keys:Array.from(this.preloadCache.keys())}},n}()});var fe=w(H=>{"use strict";function V(){return(V=Object.assign||function(n){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n}).apply(this,arguments)}Object.defineProperty(H,"__esModule",{value:!0}),Object.defineProperty(H,"default",{enumerable:!0,get:function(){return Ge}});var Ge=function(){"use strict";function n(e){this.activeLoadings=new Map,this.loadingTimers=new Map,this.defaultOptions={title:"\u52A0\u8F7D\u4E2D...",mask:!1,delay:300},e&&(this.defaultOptions=V({},this.defaultOptions,e))}var i=n.prototype;return i.show=function(e,t){var r=this;e===void 0&&(e="global");var a=V({},this.defaultOptions,t),u=this.activeLoadings.get(e)||0;return this.activeLoadings.set(e,u+1),u===0&&(this.loadingTimers.has(e)&&(clearTimeout(this.loadingTimers.get(e)),this.loadingTimers.delete(e)),a.delay&&a.delay>0?this.loadingTimers.set(e,setTimeout(function(){r.showLoading(a),r.loadingTimers.delete(e)},a.delay)):this.showLoading(a)),function(){return r.hide(e,a)}},i.hide=function(e,t){e===void 0&&(e="global");var r=this.activeLoadings.get(e)||0;if(r>0){var a=r-1;this.activeLoadings.set(e,a),a===0&&(this.loadingTimers.has(e)?(clearTimeout(this.loadingTimers.get(e)),this.loadingTimers.delete(e)):this.hideLoading(t||this.defaultOptions))}},i.hideAll=function(){this.loadingTimers.forEach(function(e){return clearTimeout(e)}),this.loadingTimers.clear(),this.activeLoadings.clear(),this.hideLoading(this.defaultOptions)},i.showLoading=function(e){e.customLoader?e.customLoader(!0,e):wx.showLoading({title:e.title||"\u52A0\u8F7D\u4E2D...",mask:e.mask||!1})},i.hideLoading=function(e){e.customLoader?e.customLoader(!1,e):wx.hideLoading()},n}()});var be=w($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0}),Object.defineProperty($,"default",{enumerable:!0,get:function(){return Xe}});var de=R(Y()),ze=R(ee()),Fe=R(oe()),Ve=R(se()),He=R(ce()),Je=R(le()),$e=R(fe()),m=C();function pe(n,i,e,t,r,a,u){try{var o=n[a](u),s=o.value}catch(h){e(h);return}o.done?i(s):Promise.resolve(s).then(t,r)}function x(n){return function(){var i=this,e=arguments;return new Promise(function(t,r){var a=n.apply(i,e);function u(s){pe(a,t,r,u,o,"next",s)}function o(s){pe(a,t,r,u,o,"throw",s)}u(void 0)})}}function v(){return(v=Object.assign||function(n){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n}).apply(this,arguments)}function R(n){return n&&n.__esModule?n:{default:n}}function J(n){return n&&typeof Symbol<"u"&&n.constructor===Symbol?"symbol":typeof n}function O(n,i){var e,t,r,a,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(s){return function(h){return function(c){if(e)throw TypeError("Generator is already executing.");for(;u;)try{if(e=1,t&&(r=2&c[0]?t.return:c[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,c[1])).done)return r;switch(t=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return u.label++,{value:c[1],done:!1};case 5:u.label++,t=c[1],c=[0];continue;case 7:c=u.ops.pop(),u.trys.pop();continue;default:if(!(r=(r=u.trys).length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){u=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){u.label=c[1];break}if(c[0]===6&&u.label<r[1]){u.label=r[1],r=c;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(c);break}r[2]&&u.ops.pop(),u.trys.pop();continue}c=i.call(n,u)}catch(f){c=[6,f],t=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([s,h])}}}var Xe=function(){"use strict";function n(e){e===void 0&&(e={}),this.defaults=v({baseURL:"",timeout:3e4,headers:{"Content-Type":"application/json"},method:"GET",validateStatus:function(r){return r>=200&&r<300},maxCacheSize:100,maxCacheAge:3e5,retryTimes:3,retryDelay:1e3,enableQueue:!0,maxConcurrent:10,enableOfflineQueue:!0,enableLoading:!1,loadingOptions:{title:"\u52A0\u8F7D\u4E2D...",mask:!1,delay:300},batchConfig:{batchUrl:"/batch",batchMode:"json",requestsFieldName:"requests",batchInterval:50,batchMaxSize:5}},e),e.batchConfig&&(this.defaults.batchConfig=v({},this.defaults.batchConfig,e.batchConfig)),this.cacheAdapter=new ze.default({maxSize:this.defaults.maxCacheSize,maxAge:this.defaults.maxCacheAge}),this.requestQueue=new Ve.default({maxConcurrent:this.defaults.maxConcurrent,enableOfflineQueue:this.defaults.enableOfflineQueue});var t=this.defaults.batchConfig||{batchUrl:"/batch",batchMode:"json",requestsFieldName:"requests",batchInterval:50,batchMaxSize:5};this.batchManager=new He.default({maxBatchSize:t.batchMaxSize,batchInterval:t.batchInterval,batchUrl:t.batchUrl,batchMode:t.batchMode,requestsFieldName:t.requestsFieldName}),this.preloadManager=new Je.default,this.loadingManager=new $e.default(this.defaults.loadingOptions),this.interceptors={request:new de.default,response:new de.default},this.request=this.request.bind(this),this.get=this.get.bind(this),this.post=this.post.bind(this),this.put=this.put.bind(this),this.delete=this.delete.bind(this),this.head=this.head.bind(this),this.options=this.options.bind(this),this.batch=this.batch.bind(this),this.preRequest=this.preRequest.bind(this),this.clearCache=this.clearCache.bind(this),this.cancelRequests=this.cancelRequests.bind(this),this.getStatus=this.getStatus.bind(this),this.cancelAll=this.cancelAll.bind(this),this.sendRequest=this.sendRequest.bind(this),this.performRequest=this.performRequest.bind(this),this.handleRequestError=this.handleRequestError.bind(this),this.cacheResponse=this.cacheResponse.bind(this),this.refreshCache=this.refreshCache.bind(this),this.handleLoading=this.handleLoading.bind(this)}var i=n.prototype;return i.request=function(e,t,r){var a=this;if(!a||!a.defaults){var u=Error(`\u8C03\u7528WxRequest\u65B9\u6CD5\u65F6\u9047\u5230this\u4E0A\u4E0B\u6587\u4E22\u5931\u95EE\u9898\u3002
\u53EF\u80FD\u7684\u539F\u56E0:
1. \u89E3\u6784\u8C03\u7528 - \u4F8B\u5982: const {request} = wxRequest;
2. \u5355\u72EC\u4F20\u9012\u65B9\u6CD5 - \u4F8B\u5982: const req = wxRequest.request;
3. \u5728\u4E8B\u4EF6\u5904\u7406\u51FD\u6570\u4E2D\u8C03\u7528\u6CA1\u6709\u7ED1\u5B9Athis

\u6B63\u786E\u7528\u6CD5:
- wxRequest.request(...) // \u76F4\u63A5\u901A\u8FC7\u5B9E\u4F8B\u8C03\u7528
- const req = wxRequest.request.bind(wxRequest) // \u4F7F\u7528bind\u7ED1\u5B9A
- const req = (...args) => wxRequest.request(...args) // \u4F7F\u7528\u7BAD\u5934\u51FD\u6570`);throw console.error(u),u}try{typeof e=="string"?((s=r||((t===void 0?"undefined":J(t))!=="object"||Array.isArray(t)||(o=Date,o!=null&&typeof Symbol<"u"&&o[Symbol.hasInstance]?!!o[Symbol.hasInstance](t):t instanceof o)?{}:t)).url=e,t?typeof t=="string"?s.method=t:((t===void 0?"undefined":J(t))==="object"||Array.isArray(t))&&(s.data=t,s.method=s.method||"POST"):s.method=s.method||"GET"):s=e,(s=(0,m.deepMerge)(a.defaults,s)).requestAdapter||(s.requestAdapter=Fe.default),s.cacheAdapter||(s.cacheAdapter=a.cacheAdapter),s.url&&(s.url=(0,m.buildURL)(s.url,s.baseURL,s.params));var o,s,h=[a.sendRequest.bind(a),void 0],c=[];a.interceptors.request.forEach(function(l){c.unshift(l.fulfilled,l.rejected)});var f=[];a.interceptors.response.forEach(function(l){f.push(l.fulfilled,l.rejected)}),h=[].concat(c,h,f);for(var p=Promise.resolve(s);h.length;)p=p.then(h.shift(),h.shift());return p=(p=p.then(function(l){if(s.skipExtract)return l;var b=s.extractField||a.defaults.extractField;if(!b)return l;if(typeof b=="function")return v({},l,{data:b(l.data)});var d=(0,m.getValueByPath)(l.data,b);return d===void 0?(console.warn("\u65E0\u6CD5\u4ECE\u54CD\u5E94\u4E2D\u63D0\u53D6\u5B57\u6BB5: "+b),l):v({},l,{data:d})})).then(function(l){return(s.returnData!==void 0?s.returnData:a.defaults.returnData)?l.data:l})}catch(l){return console.error("WxRequest.request\u8C03\u7528\u5931\u8D25:",l),Promise.reject(l)}},i.sendRequest=function(e){var t=this;return x(function(){var r,a,u,o;return O(this,function(s){switch(s.label){case 0:r=null,s.label=1;case 1:return s.trys.push([1,,4,5]),r=t.handleLoading(e),e.preloadKey&&t.preloadManager.hasPreloadResponse(e.preloadKey)&&(a=t.preloadManager.getPreloadResponse(e.preloadKey))?[2,a]:(0,m.shouldCache)(e)&&e.cacheAdapter?(u=(0,m.generateCacheKey)(e),[4,e.cacheAdapter.get(u)]):[3,3];case 2:if(o=s.sent())return e.cache==="only-if-cached"?[2,o]:(e.cache!=="force-cache"&&setTimeout(function(){t.refreshCache(e,u).catch(function(h){console.error("\u540E\u53F0\u5237\u65B0\u7F13\u5B58\u5931\u8D25:",h)})},10),[2,o]);s.label=3;case 3:return[2,t.performRequest(e)];case 4:return r&&r(),[7];case 5:return[2]}})})()},i.handleLoading=function(e){if(!(e.showLoading!==void 0?e.showLoading:this.defaults.enableLoading))return null;var t=J(e.showLoading)==="object"?e.showLoading:this.defaults.loadingOptions,r=e.groupKey||e.url||"global";return this.loadingManager.show(r,t)},i.performRequest=function(e){var t=this;return x(function(){var r,a;return O(this,function(u){return r=x(function(){var o,s;return O(this,function(h){switch(h.label){case 0:console.log("\u{1F4E1} \u76F4\u63A5\u6267\u884C\u8BF7\u6C42:",{url:e.url,method:e.method}),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e.requestAdapter(e)];case 2:return o=h.sent(),t.cacheResponse(e,o),[2,o];case 3:return s=h.sent(),[2,t.handleRequestError(s,e)];case 4:return[2]}})}),a=t.defaults.enableQueue&&!e.ignoreQueue?function(){return t.requestQueue.enqueue(e,r)}:r,e.groupKey&&t.defaults.batchInterval>0?[2,t.batchManager.addToBatch(e,e.requestAdapter)]:[2,a()]})})()},i.handleRequestError=function(e,t){var r=this;return x(function(){var a,u;return O(this,function(o){switch(o.label){case 0:return(a=e.retryCount||0)<(typeof t.retry=="number"?t.retry:t.retry===!0&&r.defaults.retryTimes||0)&&((0,m.isNetworkError)(e)||e.status&&e.status>=500)?(e.retryCount=a+1,u=t.retryDelay||r.defaults.retryDelay||1e3,t.retryIncrementalDelay&&(u*=e.retryCount),[4,(0,m.delay)(u)]):[3,2];case 1:return o.sent(),[2,r.performRequest(t)];case 2:throw e}})})()},i.cacheResponse=function(e,t){var r=this;return x(function(){var a,u;return O(this,function(o){switch(o.label){case 0:return(0,m.shouldCache)(e)&&e.cacheAdapter?(a=(0,m.generateCacheKey)(e),u=e.cacheExpire||r.defaults.maxCacheAge,[4,e.cacheAdapter.set(a,t,u)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})()},i.refreshCache=function(e,t){var r=this;return x(function(){var a,u,o;return O(this,function(s){switch(s.label){case 0:return s.trys.push([0,6,,7]),a=v({},e,{cache:!1,ignoreQueue:!0,priority:1}),e.requestAdapter?[4,e.requestAdapter(a)]:[3,4];case 1:return u=s.sent(),e.cacheAdapter?(o=e.cacheExpire||r.defaults.maxCacheAge,[4,e.cacheAdapter.set(t,u,o)]):[3,3];case 2:s.sent(),console.log("\u2705 \u540E\u53F0\u5237\u65B0\u7684\u7F13\u5B58\u5DF2\u8BBE\u7F6E\u6210\u529F"),s.label=3;case 3:return[3,5];case 4:console.warn("\u26A0\uFE0F \u65E0\u6CD5\u5237\u65B0\u7F13\u5B58\uFF1A\u7F3A\u5C11\u8BF7\u6C42\u9002\u914D\u5668"),s.label=5;case 5:return[3,7];case 6:return console.error("\u274C \u5237\u65B0\u7F13\u5B58\u5931\u8D25:",s.sent()),[3,7];case 7:return[2]}})})()},i.get=function(e,t){if(t===void 0&&(t={}),!this||!this.defaults)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.get()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.request(v({},t,{method:"GET",url:e}))},i.post=function(e,t,r){if(r===void 0&&(r={}),!this||!this.defaults)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.post()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.request(v({},r,{method:"POST",url:e,data:t}))},i.put=function(e,t,r){if(r===void 0&&(r={}),!this||!this.defaults)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.put()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.request(v({},r,{method:"PUT",url:e,data:t}))},i.delete=function(e,t){if(t===void 0&&(t={}),!this||!this.defaults)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.delete()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.request(v({},t,{method:"DELETE",url:e}))},i.head=function(e,t){if(t===void 0&&(t={}),!this||!this.defaults)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.head()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.request(v({},t,{method:"HEAD",url:e}))},i.options=function(e,t){if(t===void 0&&(t={}),!this||!this.defaults)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.options()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.request(v({},t,{method:"OPTIONS",url:e}))},i.batch=function(e,t){var r=this;if(t===void 0&&(t={}),!this||!this.batchManager)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.batch()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.batchManager.executeBatch(e.map(function(a){return(0,m.deepMerge)(t,a)}),this.sendRequest.bind(this)).then(function(a){return(t.returnData!==void 0?t.returnData:r.defaults.returnData)?a.map(function(u){return u.data}):a})},i.preRequest=function(e){if(!this||!this.preloadManager)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.preRequest()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.preloadManager.preload(e,this.request.bind(this))},i.getNetworkStatus=function(){return(0,m.getNetworkStatus)()},i.clearCache=function(){if(!this||!this.cacheAdapter)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.clearCache()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.cacheAdapter.clear()},i.cancelRequests=function(e){if(!this||!this.requestQueue)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.cancelRequests()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");this.requestQueue.cancel(e)},i.getStatus=function(){if(!this||!this.requestQueue||!this.preloadManager)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.getStatus()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return{queue:this.requestQueue.getStatus(),preload:this.preloadManager.getStatus()}},i.cancelAll=function(){if(!this||!this.loadingManager)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.cancelAll()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");this.cancelRequests(function(){return!0}),this.loadingManager.hideAll()},n.create=function(e){return new n(e)},n}()});Object.defineProperty(exports,"__esModule",{value:!0}),function(n,i){for(var e in i)Object.defineProperty(n,e,{enumerable:!0,get:i[e]})}(exports,{ErrorType:function(){return Ye.ErrorType},batch:function(){return ot},createError:function(){return ge.createError},default:function(){return Ze},delay:function(){return ge.delay},delete:function(){return it},get:function(){return tt},head:function(){return at},interceptors:function(){return ct},options:function(){return ut},post:function(){return rt},preRequest:function(){return st},put:function(){return nt},request:function(){return et},wxRequest:function(){return y}});var k,I,X,ve=(k=be())&&k.__esModule?k:{default:k},ge=C(),Ye=(I=A(),X=exports,Object.keys(I).forEach(function(n){n==="default"||Object.prototype.hasOwnProperty.call(X,n)||Object.defineProperty(X,n,{enumerable:!0,get:function(){return I[n]}})}),I),Ze=ve.default,y=new ve.default,et=y.request,tt=y.get,rt=y.post,nt=y.put,it=y.delete,at=y.head,ut=y.options,ot=y.batch,st=y.preRequest,ct=y.interceptors;
