"use strict";var w=(n,i)=>()=>(i||n((i={exports:{}}).exports,i),i.exports);var S=w(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"ErrorType",{enumerable:!0,get:function(){return ve}});var C,ve=((C={}).TIMEOUT="TIMEOUT",C.NETWORK="NETWORK",C.CANCEL="CANCEL",C.SERVER="SERVER",C.CLIENT="CLIENT",C.OFFLINE="OFFLINE",C.UNKNOWN="UNKNOWN",C)});var X=w(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),Object.defineProperty(L,"default",{enumerable:!0,get:function(){return be}});var be=function(){"use strict";function n(){this.handlers=[]}var i=n.prototype;return i.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.forEach=function(e){this.handlers.forEach(function(t){t!==null&&e(t)})},n}()});var Z=w(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"default",{enumerable:!0,get:function(){return me}});var P,ge=(P=require("lru-cache"))&&P.__esModule?P:{default:P};function Y(n,i,e,t,r,s,u){try{var a=n[s](u),o=a.value}catch(l){e(l);return}a.done?i(o):Promise.resolve(o).then(t,r)}function M(n){return function(){var i=this,e=arguments;return new Promise(function(t,r){var s=n.apply(i,e);function u(o){Y(s,t,r,u,a,"next",o)}function a(o){Y(s,t,r,u,a,"throw",o)}u(void 0)})}}function k(n,i){var e,t,r,s,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(o){return function(l){return function(c){if(e)throw TypeError("Generator is already executing.");for(;u;)try{if(e=1,t&&(r=2&c[0]?t.return:c[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,c[1])).done)return r;switch(t=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return u.label++,{value:c[1],done:!1};case 5:u.label++,t=c[1],c=[0];continue;case 7:c=u.ops.pop(),u.trys.pop();continue;default:if(!(r=(r=u.trys).length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){u=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){u.label=c[1];break}if(c[0]===6&&u.label<r[1]){u.label=r[1],r=c;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(c);break}r[2]&&u.ops.pop(),u.trys.pop();continue}c=i.call(n,u)}catch(p){c=[6,p],t=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([o,l])}}}var me=function(){"use strict";function n(e){e===void 0&&(e={}),this.cache=new ge.default({max:e.maxSize||100,ttl:e.maxAge||3e5,allowStale:!1,updateAgeOnGet:!0,updateAgeOnHas:!1})}var i=n.prototype;return i.get=function(e){var t=this;return M(function(){var r;return k(this,function(s){return(r=t.cache.get(e))&&(r.fromCache=!0),[2,r]})})()},i.set=function(e,t,r){var s=this;return M(function(){return k(this,function(u){return t.timestamp=Date.now(),s.cache.set(e,t,{ttl:r||void 0}),[2]})})()},i.delete=function(e){var t=this;return M(function(){return k(this,function(r){return t.cache.delete(e),[2]})})()},i.clear=function(){var e=this;return M(function(){return k(this,function(t){return e.cache.clear(),[2]})})()},n}()});var j=w(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),function(n,i){for(var e in i)Object.defineProperty(n,e,{enumerable:!0,get:i[e]})}(D,{buildURL:function(){return qe},combineURLs:function(){return ie},createError:function(){return we},debounce:function(){return xe},deepMerge:function(){return function n(){for(var i=arguments.length,e=Array(i),t=0;t<i;t++)e[t]=arguments[t];var r={};return e.forEach(function(s){s&&Object.keys(s).forEach(function(u){var a=s[u];(a===void 0?"undefined":x(a))!=="object"||a===null||Array.isArray(a)?r[u]=a:x(r[u])==="object"&&r[u]!==null?r[u]=n(r[u],a):r[u]=n({},a)})}),r}},delay:function(){return Ce},generateCacheKey:function(){return Ee},generateRandomId:function(){return Me},get:function(){return ke},getNetworkStatus:function(){return Te},getPriority:function(){return Se},getValueByPath:function(){return Qe},isAbsoluteURL:function(){return ne},isJSONData:function(){return Pe},isNetworkError:function(){return Re},normalizeHeaderName:function(){return je},parseHeaders:function(){return Ne},serializeParams:function(){return ue},sha256:function(){return se},shouldCache:function(){return Oe},sortObjectKeys:function(){return Q},throttle:function(){return Ae}});var te=S();function ee(n,i){(i==null||i>n.length)&&(i=n.length);for(var e=0,t=Array(i);e<i;e++)t[e]=n[e];return t}function x(n){return n&&typeof Symbol<"u"&&n.constructor===Symbol?"symbol":typeof n}function re(n,i){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e)return(e=e.call(n)).next.bind(e);if(Array.isArray(n)||(e=function(r,s){if(r){if(typeof r=="string")return ee(r,void 0);var u=Object.prototype.toString.call(r).slice(8,-1);if(u==="Object"&&r.constructor&&(u=r.constructor.name),u==="Map"||u==="Set")return Array.from(u);if(u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u))return ee(r,void 0)}}(n))||i&&n&&typeof n.length=="number"){e&&(n=e);var t=0;return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function qe(n,i,e){var t="";if(t=i&&!ne(n)?ie(i,n):n,e&&Object.keys(e).length>0){var r=t.split("#"),s=ue(e),u=r[0].indexOf("?")===-1?"?":"&";r[0]+=u+s,t=r.join("#")}return t}function ne(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function ie(n,i){return i?n.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):n}function ue(n){var i=[];return Object.keys(n).forEach(function(e){var t=n[e];t!=null&&(Array.isArray(t)?t.forEach(function(r){i.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):i.push(encodeURIComponent(e)+"="+encodeURIComponent(t)))}),i.join("&")}function Ee(n){var i=n.url,e=n.method,t=n.params,r=n.data;if(n.cacheKey)return n.cacheKey;var s=(e===void 0?"GET":e)+":"+(i===void 0?"":i);if(t&&Object.keys(t).length>0&&(s+=":params:"+JSON.stringify(Q(t))),r!==void 0)try{(r===void 0?"undefined":x(r))==="object"&&r!==null?s+=":data:"+JSON.stringify(Q(r)):s+=":data:"+String(r)}catch{s+=":data:"+String(r)}return se(s)}function Q(n){if(!n||(n===void 0?"undefined":x(n))!=="object"||Array.isArray(n))return n;var i={};return Object.keys(n).sort().forEach(function(e){i[e]=Q(n[e])}),i}function we(n,i,e,t,r,s){s===void 0&&(s=te.ErrorType.UNKNOWN);var u=Error(n);return u.config=i,u.status=e,u.data=t,u.headers=r,u.type=s,u}function Ce(n){return new Promise(function(i){return setTimeout(i,n)})}function Re(n){return!n.status&&n.type===te.ErrorType.NETWORK}function Te(){return new Promise(function(n){wx.getNetworkType({success:function(i){var e=i.networkType,t=e!=="none";n({isConnected:t,networkType:e,signalStrength:t?e==="wifi"?90:70:0})},fail:function(){n({isConnected:!0,networkType:"unknown"})}})})}function xe(n,i){var e=null;return function(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];var u=this;e&&clearTimeout(e),e=setTimeout(function(){n.apply(u,r)},i)}}function Ae(n,i){var e=!1;return function(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];e||(n.apply(this,r),e=!0,setTimeout(function(){e=!1},i))}}function Oe(n){var i=(n.method||"GET").toUpperCase(),e=n.cache;return e!==!1&&e!=="no-cache"&&i==="GET"&&(e===!0||e==="force-cache"||e==="only-if-cached")}function Se(n){return n.priority||5}function je(n,i){n&&Object.keys(n).forEach(function(e){e!==i&&e.toUpperCase()===i.toUpperCase()&&(n[i]=n[e],delete n[e])})}function Ne(n){var i,e,t,r={};return n&&n.split(`
`).forEach(function(s){(t=s.indexOf(":"))!==-1&&(i=s.substring(0,t).trim().toLowerCase(),e=s.substring(t+1).trim(),i&&(r[i]=r[i]?r[i]+", "+e:e))}),r}function Pe(n){return Object.prototype.toString.call(n)==="[object Object]"||Array.isArray(n)}function Me(){return Math.random().toString(36).substring(2,15)}function ke(n,i,e){if(e===void 0&&(e=void 0),!n||!i)return e;for(var t,r=i.split("."),s=n,u=re(r);!(t=u()).done;){var a=t.value;if(s==null||(s===void 0?"undefined":x(s))!=="object")return e;s=s[a]}return s===void 0?e:s}function Qe(n,i,e){if(e===void 0&&(e=void 0),!n||!i)return e;for(var t,r=i.split("."),s=n,u=re(r);!(t=u()).done;){var a=t.value;if(s==null||(s===void 0?"undefined":x(s))!=="object")return e;s=s[a]}return s===void 0?e:s}function se(n){var i=0;if(n.length===0)return i.toString(36);for(var e=0;e<n.length;e++)i=(i<<5)-i+n.charCodeAt(e),i&=i;return Math.abs(i).toString(36).padStart(8,"0")}});var ae=w(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),Object.defineProperty(K,"default",{enumerable:!0,get:function(){return Ie}});var v=S(),A=j(),Ie=function(n){return new Promise(function(i,e){var t=n.url,r=n.data,s=n.headers,u=n.method,a=n.timeout,o=n.responseType,l=n.enableHttp2,c=n.enableQuic,p=n.enableCache,E=n.enableVerify;if(!t){e((0,A.createError)("\u8BF7\u6C42URL\u4E0D\u80FD\u4E3A\u7A7A",n,void 0,void 0,void 0,v.ErrorType.CLIENT));return}var h={url:t,data:r,header:s===void 0?{}:s,method:u===void 0?"GET":u,timeout:a,enableHttp2:l,enableQuic:c,enableCache:p,success:function(f){var y={data:f.data,status:f.statusCode,statusText:f.errMsg||"",headers:f.header||{},config:n,request:d,timestamp:Date.now()};if((n.validateStatus||function(b){return b>=200&&b<300})(f.statusCode)){if(n.transformResponse)try{y.data=n.transformResponse(y.data,y)}catch(b){e((0,A.createError)("\u8F6C\u6362\u54CD\u5E94\u6570\u636E\u5931\u8D25: "+b.message,n,f.statusCode,f.data,f.header,v.ErrorType.CLIENT));return}n.onDone&&n.onDone(y),i(y)}else e((0,A.createError)("\u8BF7\u6C42\u5931\u8D25\uFF0C\u72B6\u6001\u7801: "+f.statusCode,n,f.statusCode,f.data,f.header,f.statusCode>=500?v.ErrorType.SERVER:v.ErrorType.CLIENT))},fail:function(f){var y=v.ErrorType.UNKNOWN,b=f.errMsg||"\u8BF7\u6C42\u5931\u8D25";f.errMsg&&(f.errMsg.includes("timeout")?(y=v.ErrorType.TIMEOUT,b="\u8BF7\u6C42\u8D85\u65F6"):f.errMsg.includes("abort")?(y=v.ErrorType.CANCEL,b="\u8BF7\u6C42\u5DF2\u53D6\u6D88"):f.errMsg.includes("fail")&&(f.errMsg.includes("\u65AD\u5F00")||f.errMsg.includes("disconnect")?(y=v.ErrorType.NETWORK,b="\u7F51\u7EDC\u8FDE\u63A5\u65AD\u5F00"):f.errMsg.includes("\u8D85\u65F6")||f.errMsg.includes("timeout")?(y=v.ErrorType.TIMEOUT,b="\u8BF7\u6C42\u8D85\u65F6"):f.errMsg.includes("\u627E\u4E0D\u5230")||f.errMsg.includes("not found")?(y=v.ErrorType.CLIENT,b="\u672A\u627E\u5230\u8BF7\u6C42\u5730\u5740"):(y=v.ErrorType.NETWORK,b="\u7F51\u7EDC\u8BF7\u6C42\u5931\u8D25")));var B=(0,A.createError)(b,n,0,void 0,void 0,y);B.originalError=f,e(B)}};E!==void 0&&(h.sslVerify=E),o&&(h.responseType=o);var d=null;try{d=wx.request(h)}catch(f){var O=(0,A.createError)("\u521B\u5EFA\u8BF7\u6C42\u5931\u8D25: "+f.message,n,0,void 0,void 0,v.ErrorType.CLIENT);O.originalError=f,e(O);return}try{n.onDownloadProgress&&d&&(d.onProgressUpdate?d.onProgressUpdate(n.onDownloadProgress):console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301\u4E0B\u8F7D\u8FDB\u5EA6\u76D1\u542C"))}catch(f){console.warn("\u8BBE\u7F6E\u4E0B\u8F7D\u8FDB\u5EA6\u76D1\u542C\u5931\u8D25",f)}try{n.cancelToken&&d&&typeof d.abort=="function"&&n.cancelToken.promise.then(function(f){if(d){try{d.abort()}catch(y){console.warn("\u53D6\u6D88\u8BF7\u6C42\u64CD\u4F5C\u5931\u8D25",y)}e((0,A.createError)(f||"\u8BF7\u6C42\u5DF2\u53D6\u6D88",n,void 0,void 0,void 0,v.ErrorType.CANCEL))}}).catch(function(f){console.error("\u5904\u7406\u53D6\u6D88\u4EE4\u724C\u65F6\u51FA\u9519",f)})}catch(f){console.warn("\u8BBE\u7F6E\u53D6\u6D88\u8BF7\u6C42\u64CD\u4F5C\u5931\u8D25",f)}})}});var oe=w(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0}),Object.defineProperty(z,"default",{enumerable:!0,get:function(){return We}});var Ue=j(),We=function(){"use strict";function n(e){e===void 0&&(e={}),this.queue=[],this.processing=[],this.offlineQueue=[],this.isProcessing=!1,this.isNetworkAvailable=!0,this.maxConcurrent=e.maxConcurrent||10,this.enableOfflineQueue=e.enableOfflineQueue!==!1,this.setupNetworkListener()}var i=n.prototype;return i.enqueue=function(e){if(!this.isNetworkAvailable&&this.enableOfflineQueue){this.offlineQueue.push(e);return}this.queue.push(e),this.sortQueue(),this.isProcessing||this.processQueue()},i.cancel=function(e){var t=this.queue.filter(function(r){return e(r.config)});this.queue=this.queue.filter(function(r){return!e(r.config)}),[].concat(t,this.processing.filter(function(r){return e(r.config)})).forEach(function(r){(r.status==="pending"||r.status==="processing")&&(r.status="failed")})},i.clear=function(){this.queue=[],this.offlineQueue=[]},i.getStatus=function(){return{queueSize:this.queue.length,processingSize:this.processing.length,offlineQueueSize:this.offlineQueue.length,isNetworkAvailable:this.isNetworkAvailable}},i.processQueue=function(){var e=this;if(!this.isProcessing){this.isProcessing=!0;var t=function(){if(e.processing.length>=e.maxConcurrent||e.queue.length===0){e.isProcessing=!1;return}var r=e.queue.shift();if(!r){e.isProcessing=!1;return}e.processItem(r),t()};t()}},i.processItem=function(e){var t=this;e.status="processing",this.processing.push(e),e.execute().then(function(){e.status="completed"}).catch(function(r){e.status="failed",console.error("\u961F\u5217\u9879\u6267\u884C\u5931\u8D25:",r)}).finally(function(){var r=t.processing.indexOf(e);r!==-1&&t.processing.splice(r,1),t.processQueue()})},i.sortQueue=function(){this.queue.sort(function(e,t){var r=t.priority-e.priority;return r!==0?r:e.timestamp-t.timestamp})},i.setupNetworkListener=function(){var e=this;(0,Ue.getNetworkStatus)().then(function(t){e.handleNetworkChange(t.isConnected)}),wx.onNetworkStatusChange(function(t){e.handleNetworkChange(t.isConnected)})},i.handleNetworkChange=function(e){var t=this;if(this.isNetworkAvailable=e,e&&this.offlineQueue.length>0){var r=[].concat(this.offlineQueue);this.offlineQueue=[],r.forEach(function(s){t.queue.push(s)}),this.sortQueue(),this.processQueue()}},n}()});var le=w(G=>{"use strict";function ce(n,i){(i==null||i>n.length)&&(i=n.length);for(var e=0,t=Array(i);e<i;e++)t[e]=n[e];return t}Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Le}});var Le=function(){"use strict";function n(){this.preloadCache=new Map,this.setupCleanupTimer()}var i=n.prototype;return i.preload=function(e,t){var r=this,s=e.preloadKey,u=e.expireTime,a=u===void 0?3e4:u;return t(e).then(function(o){var l=Date.now()+a;r.preloadCache.set(s,{response:o,expireTime:l})}).catch(function(o){console.error("\u9884\u8BF7\u6C42\u5931\u8D25:",o)})},i.getPreloadResponse=function(e){var t=this.preloadCache.get(e);return t?t.expireTime<Date.now()?(this.preloadCache.delete(e),null):(this.preloadCache.delete(e),t.response):null},i.hasPreloadResponse=function(e){var t=this.preloadCache.get(e);return!!t&&(!(t.expireTime<Date.now())||(this.preloadCache.delete(e),!1))},i.cleanup=function(){for(var e,t=Date.now(),r=function(a,o){var l=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(l)return(l=l.call(a)).next.bind(l);if(Array.isArray(a)||(l=function(p,E){if(p){if(typeof p=="string")return ce(p,void 0);var h=Object.prototype.toString.call(p).slice(8,-1);if(h==="Object"&&p.constructor&&(h=p.constructor.name),h==="Map"||h==="Set")return Array.from(h);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return ce(p,void 0)}}(a))){l&&(a=l);var c=0;return function(){return c>=a.length?{done:!0}:{done:!1,value:a[c++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.preloadCache.entries());!(e=r()).done;){var s=e.value,u=s[0];s[1].expireTime<t&&this.preloadCache.delete(u)}},i.setupCleanupTimer=function(){var e=this;setInterval(function(){e.cleanup()},6e4)},i.getStatus=function(){return{count:this.preloadCache.size,keys:Array.from(this.preloadCache.keys())}},n}()});var de=w(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),Object.defineProperty(J,"default",{enumerable:!0,get:function(){return ze}});var F=S(),fe=N(X()),_e=N(Z()),V=N(ae()),De=N(oe()),Ke=N(le()),g=j();function he(n,i,e,t,r,s,u){try{var a=n[s](u),o=a.value}catch(l){e(l);return}a.done?i(o):Promise.resolve(o).then(t,r)}function R(n){return function(){var i=this,e=arguments;return new Promise(function(t,r){var s=n.apply(i,e);function u(o){he(s,t,r,u,a,"next",o)}function a(o){he(s,t,r,u,a,"throw",o)}u(void 0)})}}function q(){return(q=Object.assign||function(n){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n}).apply(this,arguments)}function N(n){return n&&n.__esModule?n:{default:n}}function H(n){return n&&typeof Symbol<"u"&&n.constructor===Symbol?"symbol":typeof n}function T(n,i){var e,t,r,s,u={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(o){return function(l){return function(c){if(e)throw TypeError("Generator is already executing.");for(;u;)try{if(e=1,t&&(r=2&c[0]?t.return:c[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,c[1])).done)return r;switch(t=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return u.label++,{value:c[1],done:!1};case 5:u.label++,t=c[1],c=[0];continue;case 7:c=u.ops.pop(),u.trys.pop();continue;default:if(!(r=(r=u.trys).length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){u=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){u.label=c[1];break}if(c[0]===6&&u.label<r[1]){u.label=r[1],r=c;break}if(r&&u.label<r[2]){u.label=r[2],u.ops.push(c);break}r[2]&&u.ops.pop(),u.trys.pop();continue}c=i.call(n,u)}catch(p){c=[6,p],t=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([o,l])}}}var ze=function(){"use strict";function n(e){e===void 0&&(e={}),this.defaults=q({baseURL:"",timeout:1e4,headers:{"Content-Type":"application/json"},method:"GET",validateStatus:function(t){return t>=200&&t<300},maxCacheSize:100,maxCacheAge:3e5,retryTimes:3,retryDelay:1e3,enableQueue:!0,maxConcurrent:10,enableOfflineQueue:!0},e),this.cacheAdapter=new _e.default({maxSize:this.defaults.maxCacheSize,maxAge:this.defaults.maxCacheAge}),this.requestQueue=new De.default({maxConcurrent:this.defaults.maxConcurrent,enableOfflineQueue:this.defaults.enableOfflineQueue}),this.preloadManager=new Ke.default,this.interceptors={request:new fe.default,response:new fe.default},this.request=this.request.bind(this),this.get=this.get.bind(this),this.post=this.post.bind(this),this.put=this.put.bind(this),this.delete=this.delete.bind(this),this.head=this.head.bind(this),this.options=this.options.bind(this),this.preRequest=this.preRequest.bind(this),this.clearCache=this.clearCache.bind(this),this.cancelRequests=this.cancelRequests.bind(this),this.getStatus=this.getStatus.bind(this),this.cancelAll=this.cancelAll.bind(this),this.sendRequest=this.sendRequest.bind(this),this.performRequest=this.performRequest.bind(this),this.handleRequestError=this.handleRequestError.bind(this),this.cacheResponse=this.cacheResponse.bind(this),this.refreshCache=this.refreshCache.bind(this),this.enhanceErrorMessage=this.enhanceErrorMessage.bind(this),this.all=this.all.bind(this),this.spread=this.spread.bind(this)}var i=n.prototype;return i.request=function(e,t,r){var s=this;if(!s||!s.defaults){var u=Error(`\u8C03\u7528WxRequest\u65B9\u6CD5\u65F6\u9047\u5230this\u4E0A\u4E0B\u6587\u4E22\u5931\u95EE\u9898\u3002
\u53EF\u80FD\u7684\u539F\u56E0:
1. \u89E3\u6784\u8C03\u7528 - \u4F8B\u5982: const {request} = wxRequest;
2. \u5355\u72EC\u4F20\u9012\u65B9\u6CD5 - \u4F8B\u5982: const req = wxRequest.request;
3. \u5728\u4E8B\u4EF6\u5904\u7406\u51FD\u6570\u4E2D\u8C03\u7528\u6CA1\u6709\u7ED1\u5B9Athis

\u6B63\u786E\u7528\u6CD5:
- wxRequest.request(...) // \u76F4\u63A5\u901A\u8FC7\u5B9E\u4F8B\u8C03\u7528
- const req = wxRequest.request.bind(wxRequest) // \u4F7F\u7528bind\u7ED1\u5B9A
- const req = (...args) => wxRequest.request(...args) // \u4F7F\u7528\u7BAD\u5934\u51FD\u6570`);throw console.error(u),u}try{typeof e=="string"?((o=r||((t===void 0?"undefined":H(t))!=="object"||Array.isArray(t)||(a=Date,a!=null&&typeof Symbol<"u"&&a[Symbol.hasInstance]?!!a[Symbol.hasInstance](t):t instanceof a)?{}:t)).url=e,t?typeof t=="string"?o.method=t:((t===void 0?"undefined":H(t))==="object"||Array.isArray(t))&&(o.data=t,o.method=o.method||"POST"):o.method=o.method||"GET"):o=e,(o=(0,g.deepMerge)(s.defaults,o)).requestAdapter||(o.requestAdapter=V.default),!o.cacheAdapter&&(0,g.shouldCache)(o)&&(o.cacheAdapter=s.cacheAdapter);var a,o,l=[s.sendRequest.bind(s),void 0],c=[];s.interceptors.request.forEach(function(h){c.unshift(h.fulfilled,h.rejected)});var p=[];s.interceptors.response.forEach(function(h){p.push(h.fulfilled,h.rejected)}),l=[].concat(c,l,p);for(var E=Promise.resolve(o);l.length;)E=E.then(l.shift(),l.shift());return E=(E=E.then(function(h){if(o.skipExtract)return h;var d=o.extractField||s.defaults.extractField;if(!d)return h;if(typeof d=="function")return q({},h,{data:d(h.data)});var O=(0,g.getValueByPath)(h.data,d);return O===void 0?(console.warn("\u65E0\u6CD5\u4ECE\u54CD\u5E94\u4E2D\u63D0\u53D6\u5B57\u6BB5: "+d),h):q({},h,{data:O})})).then(function(h){var d;return(o.returnData!==void 0?o.returnData:s.defaults.returnData)&&(d=h.data)!=null?d:h})}catch(h){return console.error("WxRequest.request\u8C03\u7528\u5931\u8D25:",h),Promise.reject(h)}},i.sendRequest=function(e){var t=this;return R(function(){var r,s,u,a,o;return T(this,function(l){switch(l.label){case 0:if(l.trys.push([0,5,,6]),(r=t.prepareFinalConfig(e)).preloadKey&&t.preloadManager.hasPreloadResponse(r.preloadKey)&&(s=t.preloadManager.getPreloadResponse(r.preloadKey)))return[2,s];if(!((0,g.shouldCache)(r)&&r.cacheAdapter))return[3,4];u=(0,g.generateCacheKey)(r),r.url,r.cache,r.params,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,r.cacheAdapter.get(u)];case 2:return(a=l.sent())?(r.url,r.cache,a.config=r,r.cache==="only-if-cached"?[2,a]:(r.cache!=="force-cache"&&setTimeout(function(){t.refreshCache(r,u).catch(function(c){console.error("\u540E\u53F0\u5237\u65B0\u7F13\u5B58\u5931\u8D25:",c)})},10),[2,a])):(r.url,r.cache,[3,4]);case 3:return console.error("\u8BFB\u53D6\u7F13\u5B58\u5931\u8D25:",l.sent()),[3,4];case 4:return[2,t.performRequest(r)];case 5:return console.error("WxRequest.sendRequest\u8C03\u7528\u5931\u8D25:",o=l.sent()),[2,Promise.reject(o)];case 6:return[2]}})})()},i.prepareFinalConfig=function(e){var t=(0,g.deepMerge)(this.defaults,e);return t.url&&(t.url=(0,g.buildURL)(t.url,t.baseURL,t.params)),t.requestAdapter||(t.requestAdapter=V.default),!t.cacheAdapter&&(0,g.shouldCache)(t)&&(t.cacheAdapter=this.cacheAdapter),t},i.performRequest=function(e){var t=this;return R(function(){var r;return T(this,function(s){return r=R(function(){var u,a;return T(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(e.requestAdapter||V.default)(e)];case 1:return u=o.sent(),t.cacheResponse(e,u),[2,u];case 2:return a=o.sent(),[2,t.handleRequestError(a,e)];case 3:return[2]}})}),!t.defaults.enableQueue||e.ignoreQueue?[2,r()]:[2,new Promise(function(u,a){t.requestQueue.enqueue({config:e,execute:R(function(){return T(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,r()];case 1:return u(o.sent()),[3,3];case 2:return a(o.sent()),[3,3];case 3:return[2]}})}),priority:e.priority||5,timestamp:Date.now(),status:"pending"})})]})})()},i.handleRequestError=function(e,t){var r=this;return R(function(){var s,u,a,o;return T(this,function(l){switch(l.label){case 0:if(s=e.retryCount||0,u=typeof t.retry=="number"?t.retry:t.retry===!0&&r.defaults.retryTimes||0,e.type||(e.type=F.ErrorType.UNKNOWN),e.retryCount=s,!(s<u&&(e.type===F.ErrorType.NETWORK||e.type===F.ErrorType.TIMEOUT||e.status&&e.status>=500)))return[3,4];e.retryCount=s+1,a=t.retryDelay||r.defaults.retryDelay||1e3,t.retryIncrementalDelay&&(a*=e.retryCount),e.retryCount,t.url,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,(0,g.delay)(a)];case 2:return l.sent(),[2,r.performRequest(t)];case 3:throw(o=l.sent())&&(o===void 0?"undefined":H(o))==="object"&&(o.retryCount=e.retryCount),o;case 4:throw e.message=r.enhanceErrorMessage(e),e}})})()},i.enhanceErrorMessage=function(e){var t=e.message||"\u672A\u77E5\u9519\u8BEF";if(e.config&&e.config.url){var r=e.config.baseURL||"",s=e.config.url,u=s.startsWith("http")?s:""+r+s;t=t+" ["+(e.config.method||"GET")+" "+u+"]"}return e.type&&(t=t+" (\u7C7B\u578B: "+e.type+")"),e.status&&(t=t+" (\u72B6\u6001\u7801: "+e.status+")"),e.retryCount!==void 0&&e.retryCount>0&&(t=t+" (\u5DF2\u91CD\u8BD5: "+e.retryCount+"\u6B21)"),t},i.cacheResponse=function(e,t){var r=this;return R(function(){var s,u;return T(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),(0,g.shouldCache)(e)&&e.cacheAdapter&&typeof e.cacheAdapter.set=="function"?(s=(0,g.generateCacheKey)(e),u=e.cacheExpire||r.defaults.maxCacheAge,[4,e.cacheAdapter.set(s,t,u)]):[3,2];case 1:a.sent(),a.label=2;case 2:return[3,4];case 3:return console.error("\u7F13\u5B58\u54CD\u5E94\u5931\u8D25:",a.sent()),[3,4];case 4:return[2]}})})()},i.refreshCache=function(e,t){var r=this;return R(function(){var s,u,a;return T(this,function(o){switch(o.label){case 0:return o.trys.push([0,6,,7]),s=q({},e,{cache:!1,ignoreQueue:!0,priority:1}),e.requestAdapter?[4,e.requestAdapter(s)]:[3,4];case 1:return u=o.sent(),e.cacheAdapter?(a=e.cacheExpire||r.defaults.maxCacheAge,[4,e.cacheAdapter.set(t,u,a)]):[3,3];case 2:o.sent(),o.label=3;case 3:return[3,5];case 4:console.warn("\u26A0\uFE0F \u65E0\u6CD5\u5237\u65B0\u7F13\u5B58\uFF1A\u7F3A\u5C11\u8BF7\u6C42\u9002\u914D\u5668"),o.label=5;case 5:return[3,7];case 6:return console.error("\u274C \u5237\u65B0\u7F13\u5B58\u5931\u8D25:",o.sent()),[3,7];case 7:return[2]}})})()},i.get=function(e,t){if(t===void 0&&(t={}),!this||!this.defaults)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.get()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.request(q({},t,{method:"GET",url:e}))},i.post=function(e,t,r){if(r===void 0&&(r={}),!this||!this.defaults)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.post()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.request(q({},r,{method:"POST",url:e,data:t}))},i.put=function(e,t,r){if(r===void 0&&(r={}),!this||!this.defaults)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.put()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.request(q({},r,{method:"PUT",url:e,data:t}))},i.delete=function(e,t){if(t===void 0&&(t={}),!this||!this.defaults)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.delete()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.request(q({},t,{method:"DELETE",url:e}))},i.head=function(e,t){if(t===void 0&&(t={}),!this||!this.defaults)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.head()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.request(q({},t,{method:"HEAD",url:e}))},i.options=function(e,t){if(t===void 0&&(t={}),!this||!this.defaults)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.options()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.request(q({},t,{method:"OPTIONS",url:e}))},i.preRequest=function(e){if(!this||!this.preloadManager)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.preRequest()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.preloadManager.preload(e,this.request.bind(this))},i.getNetworkStatus=function(){return(0,g.getNetworkStatus)()},i.clearCache=function(){if(!this||!this.cacheAdapter)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.clearCache()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.cacheAdapter.clear()},i.cancelRequests=function(e){if(!this||!this.requestQueue)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.cancelRequests()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");this.requestQueue.cancel(e)},i.getStatus=function(){if(!this||!this.requestQueue||!this.preloadManager)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.getStatus()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return{queue:this.requestQueue.getStatus(),preload:this.preloadManager.getStatus()}},i.cancelAll=function(){if(!this||!this)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.cancelAll()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");this.cancelRequests(function(){return!0})},i.all=function(e){return Promise.all(e)},i.spread=function(e){return function(t){return e.apply(void 0,[].concat(t))}},n.create=function(e){return new n(e)},n}()});Object.defineProperty(exports,"__esModule",{value:!0}),function(n,i){for(var e in i)Object.defineProperty(n,e,{enumerable:!0,get:i[e]})}(exports,{ErrorType:function(){return Ge.ErrorType},all:function(){return et},createError:function(){return pe.createError},default:function(){return Fe},delay:function(){return pe.delay},delete:function(){return Be},get:function(){return He},head:function(){return Xe},interceptors:function(){return rt},options:function(){return Ye},post:function(){return Je},preRequest:function(){return Ze},put:function(){return $e},request:function(){return Ve},spread:function(){return tt},wxRequest:function(){return m}});var I,U,$,ye=(I=de())&&I.__esModule?I:{default:I},pe=j(),Ge=(U=S(),$=exports,Object.keys(U).forEach(function(n){n==="default"||Object.prototype.hasOwnProperty.call($,n)||Object.defineProperty($,n,{enumerable:!0,get:function(){return U[n]}})}),U),Fe=ye.default,m=new ye.default,Ve=m.request,He=m.get,Je=m.post,$e=m.put,Be=m.delete,Xe=m.head,Ye=m.options,Ze=m.preRequest,et=m.all,tt=m.spread,rt=m.interceptors;
