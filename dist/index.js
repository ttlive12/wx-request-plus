"use strict";var w=(n,u)=>()=>(u||n((u={exports:{}}).exports,u),u.exports);var A=w(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0}),Object.defineProperty(L,"ErrorType",{enumerable:!0,get:function(){return ye}});var C,ye=((C={}).TIMEOUT="TIMEOUT",C.NETWORK="NETWORK",C.CANCEL="CANCEL",C.SERVER="SERVER",C.CLIENT="CLIENT",C.OFFLINE="OFFLINE",C.UNKNOWN="UNKNOWN",C)});var X=w(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"default",{enumerable:!0,get:function(){return ve}});var ve=function(){"use strict";function n(){this.handlers=[]}var u=n.prototype;return u.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},u.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},u.forEach=function(e){this.handlers.forEach(function(t){t!==null&&e(t)})},n}()});var Z=w(_=>{"use strict";Object.defineProperty(_,"__esModule",{value:!0}),Object.defineProperty(_,"default",{enumerable:!0,get:function(){return ge}});var P,be=(P=require("lru-cache"))&&P.__esModule?P:{default:P};function Y(n,u,e,t,r,s,i){try{var o=n[s](i),a=o.value}catch(f){e(f);return}o.done?u(a):Promise.resolve(a).then(t,r)}function M(n){return function(){var u=this,e=arguments;return new Promise(function(t,r){var s=n.apply(u,e);function i(a){Y(s,t,r,i,o,"next",a)}function o(a){Y(s,t,r,i,o,"throw",a)}i(void 0)})}}function k(n,u){var e,t,r,s,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(a){return function(f){return function(c){if(e)throw TypeError("Generator is already executing.");for(;i;)try{if(e=1,t&&(r=2&c[0]?t.return:c[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,c[1])).done)return r;switch(t=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,t=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(c[0]===6&&i.label<r[1]){i.label=r[1],r=c;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(c);break}r[2]&&i.ops.pop(),i.trys.pop();continue}c=u.call(n,i)}catch(p){c=[6,p],t=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([a,f])}}}var ge=function(){"use strict";function n(e){e===void 0&&(e={}),this.cache=new be.default({max:e.maxSize||100,ttl:e.maxAge||3e5,allowStale:!1,updateAgeOnGet:!0,updateAgeOnHas:!1})}var u=n.prototype;return u.get=function(e){var t=this;return M(function(){var r;return k(this,function(s){return(r=t.cache.get(e))&&(r.fromCache=!0),[2,r]})})()},u.set=function(e,t,r){var s=this;return M(function(){return k(this,function(i){return t.timestamp=Date.now(),s.cache.set(e,t,{ttl:r||void 0}),[2]})})()},u.delete=function(e){var t=this;return M(function(){return k(this,function(r){return t.cache.delete(e),[2]})})()},u.clear=function(){var e=this;return M(function(){return k(this,function(t){return e.cache.clear(),[2]})})()},n}()});var N=w(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0}),function(n,u){for(var e in u)Object.defineProperty(n,e,{enumerable:!0,get:u[e]})}(D,{buildURL:function(){return me},combineURLs:function(){return ue},createError:function(){return Ee},debounce:function(){return Te},deepMerge:function(){return function n(){for(var u=arguments.length,e=Array(u),t=0;t<u;t++)e[t]=arguments[t];var r={};return e.forEach(function(s){s&&Object.keys(s).forEach(function(i){var o=s[i];(o===void 0?"undefined":j(o))!=="object"||o===null||Array.isArray(o)?r[i]=o:j(r[i])==="object"&&r[i]!==null?r[i]=n(r[i],o):r[i]=n({},o)})}),r}},delay:function(){return we},generateCacheKey:function(){return qe},generateRandomId:function(){return Pe},get:function(){return Me},getNetworkStatus:function(){return Re},getPriority:function(){return Ae},getValueByPath:function(){return ke},isAbsoluteURL:function(){return ne},isJSONData:function(){return Se},isNetworkError:function(){return Ce},normalizeHeaderName:function(){return je},parseHeaders:function(){return Ne},serializeParams:function(){return ie},shouldCache:function(){return Oe},sortObjectKeys:function(){return U},throttle:function(){return xe}});var te=A();function ee(n,u){(u==null||u>n.length)&&(u=n.length);for(var e=0,t=Array(u);e<u;e++)t[e]=n[e];return t}function j(n){return n&&typeof Symbol<"u"&&n.constructor===Symbol?"symbol":typeof n}function re(n,u){var e=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(e)return(e=e.call(n)).next.bind(e);if(Array.isArray(n)||(e=function(r,s){if(r){if(typeof r=="string")return ee(r,void 0);var i=Object.prototype.toString.call(r).slice(8,-1);if(i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ee(r,void 0)}}(n))||u&&n&&typeof n.length=="number"){e&&(n=e);var t=0;return function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function me(n,u,e){var t="";if(t=u&&!ne(n)?ue(u,n):n,e&&Object.keys(e).length>0){var r=t.split("#"),s=ie(e),i=r[0].indexOf("?")===-1?"?":"&";r[0]+=i+s,t=r.join("#")}return t}function ne(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function ue(n,u){return u?n.replace(/\/+$/,"")+"/"+u.replace(/^\/+/,""):n}function ie(n){var u=[];return Object.keys(n).forEach(function(e){var t=n[e];t!=null&&(Array.isArray(t)?t.forEach(function(r){u.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):u.push(encodeURIComponent(e)+"="+encodeURIComponent(t)))}),u.join("&")}function qe(n){if(n.cacheKey)return n.cacheKey;var u=n.url,e=n.method,t=n.params,r=n.data;return(e===void 0?"GET":e)+":"+u+(t?":"+JSON.stringify(U(t)):"")+(r?":"+JSON.stringify(U(r)):"")}function U(n){if(!n||(n===void 0?"undefined":j(n))!=="object"||Array.isArray(n))return n;var u={};return Object.keys(n).sort().forEach(function(e){u[e]=U(n[e])}),u}function Ee(n,u,e,t,r,s){s===void 0&&(s=te.ErrorType.UNKNOWN);var i=Error(n);return i.config=u,i.status=e,i.data=t,i.headers=r,i.type=s,i}function we(n){return new Promise(function(u){return setTimeout(u,n)})}function Ce(n){return!n.status&&n.type===te.ErrorType.NETWORK}function Re(){return new Promise(function(n){wx.getNetworkType({success:function(u){var e=u.networkType,t=e!=="none";n({isConnected:t,networkType:e,signalStrength:t?e==="wifi"?90:70:0})},fail:function(){n({isConnected:!0,networkType:"unknown"})}})})}function Te(n,u){var e=null;return function(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];var i=this;e&&clearTimeout(e),e=setTimeout(function(){n.apply(i,r)},u)}}function xe(n,u){var e=!1;return function(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];e||(n.apply(this,r),e=!0,setTimeout(function(){e=!1},u))}}function Oe(n){var u=(n.method||"GET").toUpperCase(),e=n.cache;return e!==!1&&e!=="no-cache"&&u==="GET"&&(e===!0||e==="force-cache"||e==="only-if-cached")}function Ae(n){return n.priority||5}function je(n,u){n&&Object.keys(n).forEach(function(e){e!==u&&e.toUpperCase()===u.toUpperCase()&&(n[u]=n[e],delete n[e])})}function Ne(n){var u,e,t,r={};return n&&n.split(`
`).forEach(function(s){(t=s.indexOf(":"))!==-1&&(u=s.substring(0,t).trim().toLowerCase(),e=s.substring(t+1).trim(),u&&(r[u]=r[u]?r[u]+", "+e:e))}),r}function Se(n){return Object.prototype.toString.call(n)==="[object Object]"||Array.isArray(n)}function Pe(){return Math.random().toString(36).substring(2,15)}function Me(n,u,e){if(e===void 0&&(e=void 0),!n||!u)return e;for(var t,r=u.split("."),s=n,i=re(r);!(t=i()).done;){var o=t.value;if(s==null||(s===void 0?"undefined":j(s))!=="object")return e;s=s[o]}return s===void 0?e:s}function ke(n,u,e){if(e===void 0&&(e=void 0),!n||!u)return e;for(var t,r=u.split("."),s=n,i=re(r);!(t=i()).done;){var o=t.value;if(s==null||(s===void 0?"undefined":j(s))!=="object")return e;s=s[o]}return s===void 0?e:s}});var se=w(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),Object.defineProperty(K,"default",{enumerable:!0,get:function(){return Ue}});var v=A(),x=N(),Ue=function(n){return new Promise(function(u,e){var t=n.url,r=n.data,s=n.headers,i=n.method,o=n.timeout,a=n.responseType,f=n.enableHttp2,c=n.enableQuic,p=n.enableCache,E=n.enableVerify;if(!t){e((0,x.createError)("\u8BF7\u6C42URL\u4E0D\u80FD\u4E3A\u7A7A",n,void 0,void 0,void 0,v.ErrorType.CLIENT));return}var h={url:t,data:r,header:s===void 0?{}:s,method:i===void 0?"GET":i,timeout:o,enableHttp2:f,enableQuic:c,enableCache:p,success:function(l){var y={data:l.data,status:l.statusCode,statusText:l.errMsg||"",headers:l.header||{},config:n,request:d,timestamp:Date.now()};if((n.validateStatus||function(g){return g>=200&&g<300})(l.statusCode)){if(n.transformResponse)try{y.data=n.transformResponse(y.data,y)}catch(g){e((0,x.createError)("\u8F6C\u6362\u54CD\u5E94\u6570\u636E\u5931\u8D25: "+g.message,n,l.statusCode,l.data,l.header,v.ErrorType.CLIENT));return}n.onDone&&n.onDone(y),u(y)}else e((0,x.createError)("\u8BF7\u6C42\u5931\u8D25\uFF0C\u72B6\u6001\u7801: "+l.statusCode,n,l.statusCode,l.data,l.header,l.statusCode>=500?v.ErrorType.SERVER:v.ErrorType.CLIENT))},fail:function(l){var y=v.ErrorType.UNKNOWN,g=l.errMsg||"\u8BF7\u6C42\u5931\u8D25";l.errMsg&&(l.errMsg.includes("timeout")?(y=v.ErrorType.TIMEOUT,g="\u8BF7\u6C42\u8D85\u65F6"):l.errMsg.includes("abort")?(y=v.ErrorType.CANCEL,g="\u8BF7\u6C42\u5DF2\u53D6\u6D88"):l.errMsg.includes("fail")&&(l.errMsg.includes("\u65AD\u5F00")||l.errMsg.includes("disconnect")?(y=v.ErrorType.NETWORK,g="\u7F51\u7EDC\u8FDE\u63A5\u65AD\u5F00"):l.errMsg.includes("\u8D85\u65F6")||l.errMsg.includes("timeout")?(y=v.ErrorType.TIMEOUT,g="\u8BF7\u6C42\u8D85\u65F6"):l.errMsg.includes("\u627E\u4E0D\u5230")||l.errMsg.includes("not found")?(y=v.ErrorType.CLIENT,g="\u672A\u627E\u5230\u8BF7\u6C42\u5730\u5740"):(y=v.ErrorType.NETWORK,g="\u7F51\u7EDC\u8BF7\u6C42\u5931\u8D25")));var B=(0,x.createError)(g,n,0,void 0,void 0,y);B.originalError=l,e(B)}};E!==void 0&&(h.sslVerify=E),a&&(h.responseType=a);var d=null;try{d=wx.request(h)}catch(l){var O=(0,x.createError)("\u521B\u5EFA\u8BF7\u6C42\u5931\u8D25: "+l.message,n,0,void 0,void 0,v.ErrorType.CLIENT);O.originalError=l,e(O);return}try{n.onDownloadProgress&&d&&(d.onProgressUpdate?d.onProgressUpdate(n.onDownloadProgress):console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301\u4E0B\u8F7D\u8FDB\u5EA6\u76D1\u542C"))}catch(l){console.warn("\u8BBE\u7F6E\u4E0B\u8F7D\u8FDB\u5EA6\u76D1\u542C\u5931\u8D25",l)}try{n.cancelToken&&d&&typeof d.abort=="function"&&n.cancelToken.promise.then(function(l){if(d){try{d.abort()}catch(y){console.warn("\u53D6\u6D88\u8BF7\u6C42\u64CD\u4F5C\u5931\u8D25",y)}e((0,x.createError)(l||"\u8BF7\u6C42\u5DF2\u53D6\u6D88",n,void 0,void 0,void 0,v.ErrorType.CANCEL))}}).catch(function(l){console.error("\u5904\u7406\u53D6\u6D88\u4EE4\u724C\u65F6\u51FA\u9519",l)})}catch(l){console.warn("\u8BBE\u7F6E\u53D6\u6D88\u8BF7\u6C42\u64CD\u4F5C\u5931\u8D25",l)}})}});var ae=w(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0}),Object.defineProperty(z,"default",{enumerable:!0,get:function(){return Qe}});var Ie=N(),Qe=function(){"use strict";function n(e){e===void 0&&(e={}),this.queue=[],this.processing=[],this.offlineQueue=[],this.isProcessing=!1,this.isNetworkAvailable=!0,this.maxConcurrent=e.maxConcurrent||10,this.enableOfflineQueue=e.enableOfflineQueue!==!1,this.setupNetworkListener()}var u=n.prototype;return u.enqueue=function(e){if(!this.isNetworkAvailable&&this.enableOfflineQueue){this.offlineQueue.push(e);return}this.queue.push(e),this.sortQueue(),this.isProcessing||this.processQueue()},u.cancel=function(e){var t=this.queue.filter(function(r){return e(r.config)});this.queue=this.queue.filter(function(r){return!e(r.config)}),[].concat(t,this.processing.filter(function(r){return e(r.config)})).forEach(function(r){(r.status==="pending"||r.status==="processing")&&(r.status="failed")})},u.clear=function(){this.queue=[],this.offlineQueue=[]},u.getStatus=function(){return{queueSize:this.queue.length,processingSize:this.processing.length,offlineQueueSize:this.offlineQueue.length,isNetworkAvailable:this.isNetworkAvailable}},u.processQueue=function(){var e=this;if(!this.isProcessing){this.isProcessing=!0;var t=function(){if(e.processing.length>=e.maxConcurrent||e.queue.length===0){e.isProcessing=!1;return}var r=e.queue.shift();if(!r){e.isProcessing=!1;return}e.processItem(r),t()};t()}},u.processItem=function(e){var t=this;e.status="processing",this.processing.push(e),e.execute().then(function(){e.status="completed"}).catch(function(r){e.status="failed",console.error("\u961F\u5217\u9879\u6267\u884C\u5931\u8D25:",r)}).finally(function(){var r=t.processing.indexOf(e);r!==-1&&t.processing.splice(r,1),t.processQueue()})},u.sortQueue=function(){this.queue.sort(function(e,t){var r=t.priority-e.priority;return r!==0?r:e.timestamp-t.timestamp})},u.setupNetworkListener=function(){var e=this;(0,Ie.getNetworkStatus)().then(function(t){e.handleNetworkChange(t.isConnected)}),wx.onNetworkStatusChange(function(t){e.handleNetworkChange(t.isConnected)})},u.handleNetworkChange=function(e){var t=this;if(this.isNetworkAvailable=e,e&&this.offlineQueue.length>0){var r=[].concat(this.offlineQueue);this.offlineQueue=[],r.forEach(function(s){t.queue.push(s)}),this.sortQueue(),this.processQueue()}},n}()});var ce=w(G=>{"use strict";function oe(n,u){(u==null||u>n.length)&&(u=n.length);for(var e=0,t=Array(u);e<u;e++)t[e]=n[e];return t}Object.defineProperty(G,"__esModule",{value:!0}),Object.defineProperty(G,"default",{enumerable:!0,get:function(){return Le}});var Le=function(){"use strict";function n(){this.preloadCache=new Map,this.setupCleanupTimer()}var u=n.prototype;return u.preload=function(e,t){var r=this,s=e.preloadKey,i=e.expireTime,o=i===void 0?3e4:i;return t(e).then(function(a){var f=Date.now()+o;r.preloadCache.set(s,{response:a,expireTime:f})}).catch(function(a){console.error("\u9884\u8BF7\u6C42\u5931\u8D25:",a)})},u.getPreloadResponse=function(e){var t=this.preloadCache.get(e);return t?t.expireTime<Date.now()?(this.preloadCache.delete(e),null):(this.preloadCache.delete(e),t.response):null},u.hasPreloadResponse=function(e){var t=this.preloadCache.get(e);return!!t&&(!(t.expireTime<Date.now())||(this.preloadCache.delete(e),!1))},u.cleanup=function(){for(var e,t=Date.now(),r=function(o,a){var f=typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(f)return(f=f.call(o)).next.bind(f);if(Array.isArray(o)||(f=function(p,E){if(p){if(typeof p=="string")return oe(p,void 0);var h=Object.prototype.toString.call(p).slice(8,-1);if(h==="Object"&&p.constructor&&(h=p.constructor.name),h==="Map"||h==="Set")return Array.from(h);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return oe(p,void 0)}}(o))){f&&(o=f);var c=0;return function(){return c>=o.length?{done:!0}:{done:!1,value:o[c++]}}}throw TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.preloadCache.entries());!(e=r()).done;){var s=e.value,i=s[0];s[1].expireTime<t&&this.preloadCache.delete(i)}},u.setupCleanupTimer=function(){var e=this;setInterval(function(){e.cleanup()},6e4)},u.getStatus=function(){return{count:this.preloadCache.size,keys:Array.from(this.preloadCache.keys())}},n}()});var he=w(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0}),Object.defineProperty(J,"default",{enumerable:!0,get:function(){return Ke}});var F=A(),le=S(X()),We=S(Z()),V=S(se()),_e=S(ae()),De=S(ce()),b=N();function fe(n,u,e,t,r,s,i){try{var o=n[s](i),a=o.value}catch(f){e(f);return}o.done?u(a):Promise.resolve(a).then(t,r)}function R(n){return function(){var u=this,e=arguments;return new Promise(function(t,r){var s=n.apply(u,e);function i(a){fe(s,t,r,i,o,"next",a)}function o(a){fe(s,t,r,i,o,"throw",a)}i(void 0)})}}function q(){return(q=Object.assign||function(n){for(var u=1;u<arguments.length;u++){var e=arguments[u];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n}).apply(this,arguments)}function S(n){return n&&n.__esModule?n:{default:n}}function H(n){return n&&typeof Symbol<"u"&&n.constructor===Symbol?"symbol":typeof n}function T(n,u){var e,t,r,s,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(a){return function(f){return function(c){if(e)throw TypeError("Generator is already executing.");for(;i;)try{if(e=1,t&&(r=2&c[0]?t.return:c[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,c[1])).done)return r;switch(t=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,t=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){i.label=c[1];break}if(c[0]===6&&i.label<r[1]){i.label=r[1],r=c;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(c);break}r[2]&&i.ops.pop(),i.trys.pop();continue}c=u.call(n,i)}catch(p){c=[6,p],t=0}finally{e=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([a,f])}}}var Ke=function(){"use strict";function n(e){e===void 0&&(e={}),this.defaults=q({baseURL:"",timeout:3e4,headers:{"Content-Type":"application/json"},method:"GET",validateStatus:function(t){return t>=200&&t<300},maxCacheSize:100,maxCacheAge:3e5,retryTimes:3,retryDelay:1e3,enableQueue:!0,maxConcurrent:10,enableOfflineQueue:!0},e),this.cacheAdapter=new We.default({maxSize:this.defaults.maxCacheSize,maxAge:this.defaults.maxCacheAge}),this.requestQueue=new _e.default({maxConcurrent:this.defaults.maxConcurrent,enableOfflineQueue:this.defaults.enableOfflineQueue}),this.preloadManager=new De.default,this.interceptors={request:new le.default,response:new le.default},this.request=this.request.bind(this),this.get=this.get.bind(this),this.post=this.post.bind(this),this.put=this.put.bind(this),this.delete=this.delete.bind(this),this.head=this.head.bind(this),this.options=this.options.bind(this),this.preRequest=this.preRequest.bind(this),this.clearCache=this.clearCache.bind(this),this.cancelRequests=this.cancelRequests.bind(this),this.getStatus=this.getStatus.bind(this),this.cancelAll=this.cancelAll.bind(this),this.sendRequest=this.sendRequest.bind(this),this.performRequest=this.performRequest.bind(this),this.handleRequestError=this.handleRequestError.bind(this),this.cacheResponse=this.cacheResponse.bind(this),this.refreshCache=this.refreshCache.bind(this),this.enhanceErrorMessage=this.enhanceErrorMessage.bind(this),this.all=this.all.bind(this),this.spread=this.spread.bind(this)}var u=n.prototype;return u.request=function(e,t,r){var s=this;if(!s||!s.defaults){var i=Error(`\u8C03\u7528WxRequest\u65B9\u6CD5\u65F6\u9047\u5230this\u4E0A\u4E0B\u6587\u4E22\u5931\u95EE\u9898\u3002
\u53EF\u80FD\u7684\u539F\u56E0:
1. \u89E3\u6784\u8C03\u7528 - \u4F8B\u5982: const {request} = wxRequest;
2. \u5355\u72EC\u4F20\u9012\u65B9\u6CD5 - \u4F8B\u5982: const req = wxRequest.request;
3. \u5728\u4E8B\u4EF6\u5904\u7406\u51FD\u6570\u4E2D\u8C03\u7528\u6CA1\u6709\u7ED1\u5B9Athis

\u6B63\u786E\u7528\u6CD5:
- wxRequest.request(...) // \u76F4\u63A5\u901A\u8FC7\u5B9E\u4F8B\u8C03\u7528
- const req = wxRequest.request.bind(wxRequest) // \u4F7F\u7528bind\u7ED1\u5B9A
- const req = (...args) => wxRequest.request(...args) // \u4F7F\u7528\u7BAD\u5934\u51FD\u6570`);throw console.error(i),i}try{typeof e=="string"?((a=r||((t===void 0?"undefined":H(t))!=="object"||Array.isArray(t)||(o=Date,o!=null&&typeof Symbol<"u"&&o[Symbol.hasInstance]?!!o[Symbol.hasInstance](t):t instanceof o)?{}:t)).url=e,t?typeof t=="string"?a.method=t:((t===void 0?"undefined":H(t))==="object"||Array.isArray(t))&&(a.data=t,a.method=a.method||"POST"):a.method=a.method||"GET"):a=e,(a=(0,b.deepMerge)(s.defaults,a)).requestAdapter||(a.requestAdapter=V.default),!a.cacheAdapter&&(0,b.shouldCache)(a)&&(a.cacheAdapter=s.cacheAdapter),a.url&&(a.url=(0,b.buildURL)(a.url,a.baseURL,a.params));var o,a,f=[s.sendRequest.bind(s),void 0],c=[];s.interceptors.request.forEach(function(h){c.unshift(h.fulfilled,h.rejected)});var p=[];s.interceptors.response.forEach(function(h){p.push(h.fulfilled,h.rejected)}),f=[].concat(c,f,p);for(var E=Promise.resolve(a);f.length;)E=E.then(f.shift(),f.shift());return E=(E=E.then(function(h){if(a.skipExtract)return h;var d=a.extractField||s.defaults.extractField;if(!d)return h;if(typeof d=="function")return q({},h,{data:d(h.data)});var O=(0,b.getValueByPath)(h.data,d);return O===void 0?(console.warn("\u65E0\u6CD5\u4ECE\u54CD\u5E94\u4E2D\u63D0\u53D6\u5B57\u6BB5: "+d),h):q({},h,{data:O})})).then(function(h){var d;return(a.returnData!==void 0?a.returnData:s.defaults.returnData)&&(d=h.data)!=null?d:h})}catch(h){return console.error("WxRequest.request\u8C03\u7528\u5931\u8D25:",h),Promise.reject(h)}},u.sendRequest=function(e){var t=this;return R(function(){var r,s,i,o;return T(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),e.preloadKey&&t.preloadManager.hasPreloadResponse(e.preloadKey)&&(r=t.preloadManager.getPreloadResponse(e.preloadKey))?[2,r]:(0,b.shouldCache)(e)&&e.cacheAdapter?(s=(0,b.generateCacheKey)(e),[4,e.cacheAdapter.get(s)]):[3,2];case 1:if(i=a.sent())return e.cache==="only-if-cached"?[2,i]:(e.cache!=="force-cache"&&setTimeout(function(){t.refreshCache(e,s).catch(function(f){console.error("\u540E\u53F0\u5237\u65B0\u7F13\u5B58\u5931\u8D25:",f)})},10),[2,i]);a.label=2;case 2:return[2,t.performRequest(e)];case 3:return console.error("WxRequest.sendRequest\u8C03\u7528\u5931\u8D25:",o=a.sent()),[2,Promise.reject(o)];case 4:return[2]}})})()},u.prepareFinalConfig=function(e){var t=(0,b.deepMerge)(this.defaults,e);if(t.baseURL&&t.url&&!t.url.startsWith("http")&&(t.url=(0,b.buildURL)(t.baseURL,t.url)),t.params&&t.url){var r=Object.keys(t.params).map(function(s){return encodeURIComponent(s)+"="+encodeURIComponent(t.params[s])}).join("&");r&&(t.url=""+t.url+(t.url.includes("?")?"&":"?")+r)}return t.requestAdapter||(t.requestAdapter=V.default),!t.cacheAdapter&&(0,b.shouldCache)(t)&&(t.cacheAdapter=this.cacheAdapter),t},u.performRequest=function(e){var t=this;return R(function(){var r;return T(this,function(s){return r=R(function(){var i,o,a,f;return T(this,function(c){switch(c.label){case 0:o=(i=t.prepareFinalConfig(e)).requestAdapter||V.default,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,o(i)];case 2:return a=c.sent(),t.cacheResponse(i,a),[2,a];case 3:return f=c.sent(),[2,t.handleRequestError(f,i)];case 4:return[2]}})}),!t.defaults.enableQueue||e.ignoreQueue?[2,r()]:[2,new Promise(function(i,o){t.requestQueue.enqueue({config:e,execute:R(function(){return T(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,r()];case 1:return i(a.sent()),[3,3];case 2:return o(a.sent()),[3,3];case 3:return[2]}})}),priority:e.priority||5,timestamp:Date.now(),status:"pending"})})]})})()},u.handleRequestError=function(e,t){var r=this;return R(function(){var s,i,o,a;return T(this,function(f){switch(f.label){case 0:if(s=e.retryCount||0,i=typeof t.retry=="number"?t.retry:t.retry===!0&&r.defaults.retryTimes||0,e.type||(e.type=F.ErrorType.UNKNOWN),e.retryCount=s,!(s<i&&(e.type===F.ErrorType.NETWORK||e.type===F.ErrorType.TIMEOUT||e.status&&e.status>=500)))return[3,4];e.retryCount=s+1,o=t.retryDelay||r.defaults.retryDelay||1e3,t.retryIncrementalDelay&&(o*=e.retryCount),e.retryCount,t.url,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,(0,b.delay)(o)];case 2:return f.sent(),[2,r.performRequest(t)];case 3:throw(a=f.sent())&&(a===void 0?"undefined":H(a))==="object"&&(a.retryCount=e.retryCount),a;case 4:throw e.message=r.enhanceErrorMessage(e),e}})})()},u.enhanceErrorMessage=function(e){var t=e.message||"\u672A\u77E5\u9519\u8BEF";if(e.config&&e.config.url){var r=e.config.baseURL||"",s=e.config.url,i=s.startsWith("http")?s:""+r+s;t=t+" ["+(e.config.method||"GET")+" "+i+"]"}return e.type&&(t=t+" (\u7C7B\u578B: "+e.type+")"),e.status&&(t=t+" (\u72B6\u6001\u7801: "+e.status+")"),e.retryCount!==void 0&&e.retryCount>0&&(t=t+" (\u5DF2\u91CD\u8BD5: "+e.retryCount+"\u6B21)"),t},u.cacheResponse=function(e,t){var r=this;return R(function(){var s,i;return T(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),(0,b.shouldCache)(e)&&e.cacheAdapter&&typeof e.cacheAdapter.set=="function"?(s=(0,b.generateCacheKey)(e),i=e.cacheExpire||r.defaults.maxCacheAge,[4,e.cacheAdapter.set(s,t,i)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[3,4];case 3:return console.error("\u7F13\u5B58\u54CD\u5E94\u5931\u8D25:",o.sent()),[3,4];case 4:return[2]}})})()},u.refreshCache=function(e,t){var r=this;return R(function(){var s,i,o;return T(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),s=q({},e,{cache:!1,ignoreQueue:!0,priority:1}),e.requestAdapter?[4,e.requestAdapter(s)]:[3,4];case 1:return i=a.sent(),e.cacheAdapter?(o=e.cacheExpire||r.defaults.maxCacheAge,[4,e.cacheAdapter.set(t,i,o)]):[3,3];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:console.warn("\u26A0\uFE0F \u65E0\u6CD5\u5237\u65B0\u7F13\u5B58\uFF1A\u7F3A\u5C11\u8BF7\u6C42\u9002\u914D\u5668"),a.label=5;case 5:return[3,7];case 6:return console.error("\u274C \u5237\u65B0\u7F13\u5B58\u5931\u8D25:",a.sent()),[3,7];case 7:return[2]}})})()},u.get=function(e,t){if(t===void 0&&(t={}),!this||!this.defaults)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.get()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.request(q({},t,{method:"GET",url:e}))},u.post=function(e,t,r){if(r===void 0&&(r={}),!this||!this.defaults)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.post()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.request(q({},r,{method:"POST",url:e,data:t}))},u.put=function(e,t,r){if(r===void 0&&(r={}),!this||!this.defaults)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.put()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.request(q({},r,{method:"PUT",url:e,data:t}))},u.delete=function(e,t){if(t===void 0&&(t={}),!this||!this.defaults)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.delete()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.request(q({},t,{method:"DELETE",url:e}))},u.head=function(e,t){if(t===void 0&&(t={}),!this||!this.defaults)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.head()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.request(q({},t,{method:"HEAD",url:e}))},u.options=function(e,t){if(t===void 0&&(t={}),!this||!this.defaults)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.options()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.request(q({},t,{method:"OPTIONS",url:e}))},u.preRequest=function(e){if(!this||!this.preloadManager)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.preRequest()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.preloadManager.preload(e,this.request.bind(this))},u.getNetworkStatus=function(){return(0,b.getNetworkStatus)()},u.clearCache=function(){if(!this||!this.cacheAdapter)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.clearCache()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return this.cacheAdapter.clear()},u.cancelRequests=function(e){if(!this||!this.requestQueue)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.cancelRequests()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");this.requestQueue.cancel(e)},u.getStatus=function(){if(!this||!this.requestQueue||!this.preloadManager)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.getStatus()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");return{queue:this.requestQueue.getStatus(),preload:this.preloadManager.getStatus()}},u.cancelAll=function(){if(!this||!this)throw Error("WxRequest\u5B9E\u4F8B\u7684this\u4E0A\u4E0B\u6587\u4E22\u5931\u3002\u8BF7\u4F7F\u7528wxRequest.cancelAll()\u7684\u65B9\u5F0F\u8C03\u7528\uFF0C\u6216\u4F7F\u7528bind\u7ED1\u5B9A\u4E0A\u4E0B\u6587\u3002");this.cancelRequests(function(){return!0})},u.all=function(e){return Promise.all(e)},u.spread=function(e){return function(t){return e.apply(void 0,[].concat(t))}},n.create=function(e){return new n(e)},n}()});Object.defineProperty(exports,"__esModule",{value:!0}),function(n,u){for(var e in u)Object.defineProperty(n,e,{enumerable:!0,get:u[e]})}(exports,{ErrorType:function(){return ze.ErrorType},all:function(){return Ze},createError:function(){return de.createError},default:function(){return Ge},delay:function(){return de.delay},delete:function(){return $e},get:function(){return Ve},head:function(){return Be},interceptors:function(){return tt},options:function(){return Xe},post:function(){return He},preRequest:function(){return Ye},put:function(){return Je},request:function(){return Fe},spread:function(){return et},wxRequest:function(){return m}});var I,Q,$,pe=(I=he())&&I.__esModule?I:{default:I},de=N(),ze=(Q=A(),$=exports,Object.keys(Q).forEach(function(n){n==="default"||Object.prototype.hasOwnProperty.call($,n)||Object.defineProperty($,n,{enumerable:!0,get:function(){return Q[n]}})}),Q),Ge=pe.default,m=new pe.default,Fe=m.request,Ve=m.get,He=m.post,Je=m.put,$e=m.delete,Be=m.head,Xe=m.options,Ye=m.preRequest,Ze=m.all,et=m.spread,tt=m.interceptors;
